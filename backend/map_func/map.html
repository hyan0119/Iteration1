<!DOCTYPE html>
<html>
<head>
    <title>Full Screen Map</title>
    <style>
        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            border: 2px solid white;
            margin: 50px;
        }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>
    <div id="map"></div>
    <button onclick="getCurrentLocation()">Go to Current Location</button>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        var map = L.map('map').setView([-37.8136, 144.9631], 13);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
            maxZoom: 19,
        }).addTo(map);

        // Set the layer of the map
        // var layer = L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
        //     attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
        //     maxZoom: 19,
        // }).addTo(map);

        <!-- Add missing Leaflet library import statement -->
        

        fetch('a.json')
            .then(response => response.json())
            .then(data => {
                L.geoJson(data).addTo(map);


                function style(feature) {
                    return {
                        fillColor: getColor(feature.properties.UHI18_M),
                        fillOpacity: 0.7,
                        weight: 1.5,
                        color: 'white'
                    };
                }
                L.geoJson(data, {style: style}).addTo(map);

                
                // Add a legend to the map
                function highlightFeature(e) {
                    var layer = e.target;

                    layer.setStyle({
                        weight: 5,
                        color: '#666',
                        dashArray: '',
                        fillOpacity: 0.7
                    });

                    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
                        layer.bringToFront();
                    }

                    info.update(layer.feature.properties);
                }

                function resetHighlight(e) {
                    geojson.resetStyle(e.target);
                    info.update();
                }

                function zoomToFeature(e) {
                    map.fitBounds(e.target.getBounds());
                }

                var geojson;
                // geojson = L.geoJson();

                function onEachFeature(feature, layer) {
                    layer.on({
                        mouseover: highlightFeature,
                        mouseout: resetHighlight,
                        click: zoomToFeature
                    });
                }

                geojson = L.geoJson(data, {
                    style: style,
                    onEachFeature: onEachFeature
                }).addTo(map);

                var info = L.control();

                info.onAdd = function (map) {
                    this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
                    this.update();
                    return this._div;
                };

                // method that we will use to update the control based on feature properties passed
                info.update = function (props) {
                    this._div.innerHTML = '<h4>Urban Heat Vulnerability Map</h4>' +  (props ?
                        '<b>' + props.SA2_NAME16 + '</b><br />' + props.UHI18_M
                        : 'Hover over a suburb');
                };

                info.addTo(map);


                
            })
            .catch(error => {
                console.error('Error:', error);
            });

        // Function to determine the color based on the HVI index
        // function getColor(hvi) {
        //     if (hvi >= 0 && hvi < 1) {
        //         return 'white';
        //     } else if (hvi >= 1 && hvi < 2) {
        //         return 'yellow';
        //     } else if (hvi >= 50 && hvi < 75) {
        //         return 'orange';
        //     } else {
        //         return 'red';
        //     }
        // }

        function getColor(hvi) {
            if (hvi == 0) {
                return "#fff5e6";
            } else if (hvi == 1) {
                return "#ffd699";
            } else if (hvi == 2) {
                return "#ffc266";
            } else if (hvi == 3) {
                return "#ffad33";
            } else if (hvi == 4) {
                return "#ff9900";
            } else if (hvi == 5) {
                return "#e68a00";
            } else {
                return 'blue';
            }
        }
    // </script>



    </script>
    <script>
        function getCurrentLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        function showPosition(position) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;
            map.setView([latitude, longitude], 13);
            L.marker([latitude, longitude]).addTo(map);
        }

        getCurrentLocation();
    </script>

    <style>
        .info {
            padding: 6px 8px;
            font: 14px/16px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255,255,255,0.8);
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            border-radius: 5px;
            text-align: center;
        }
        .info h4 {
            margin: 0 0 5px;
            color: #777;
        }
    </style>

    <!-- <style>
        #map { 
        /* height: 100vh;  */
        }

        .leaflet-layer,
        .leaflet-control-zoom-in,
        .leaflet-control-zoom-out,
        .leaflet-control-attribution {
        filter: invert(100%) hue-rotate(180deg) brightness(95%) contrast(90%);
        }
    </style> -->

</body>
</html>